# Social Media Content Analyzer & Scheduler - MVP

## ğŸ¯ Objective
Tool that analyzes social media posts and suggests optimized content/scheduling using AI agents.

---

## ğŸ’° Development Costs

### Option 1: Anthropic API (RECOMMENDED)
- **Initial cost**: $5 free credits when creating account at https://console.anthropic.com
- **Model**: Claude 3.5 Sonnet ($3 per million input tokens, $15 per million output)
- **For your MVP**: $5 is MORE than enough for all development and testing
  - Typical request uses ~5000 tokens (input + output)
  - Cost per request: ~$0.01-0.02
  - With $5 â†’ ~250-500 requests
  - More than sufficient for development

### Option 2: 100% Free Alternative
- **Vercel AI SDK** with **Groq** (free with rate limits)
- Model: Llama 3 or Mixtral
- Limit: ~30 requests/minute

**IMPORTANT**: Your claude.ai subscription ($20/month) and the API are separate services. You need to create an account at console.anthropic.com to get an API key.

---

## ğŸ“Š Database Structure
```sql
-- User/Social Media Account
CREATE TABLE social_accounts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  platform VARCHAR(50) NOT NULL, -- twitter/instagram/linkedin
  created_at TIMESTAMP DEFAULT NOW()
);

-- Historical Posts
CREATE TABLE posts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  social_account_id UUID REFERENCES social_accounts(id),
  content TEXT NOT NULL,
  topic VARCHAR(100), -- e.g., "promotions", "tips", "behind-the-scenes"
  published_at TIMESTAMP NOT NULL, -- when it was published
  scraped_at TIMESTAMP NOT NULL, -- 48hrs after published_at
  day_of_week VARCHAR(20), -- monday, tuesday, etc
  hour_of_day INTEGER, -- 14, 18, 20, etc
  likes_count INTEGER DEFAULT 0, -- total at 48hrs
  comments_count INTEGER DEFAULT 0,
  shares_count INTEGER DEFAULT 0,
  has_image BOOLEAN DEFAULT FALSE,
  has_video BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Analyses generated by the agent
CREATE TABLE analyses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  social_account_id UUID REFERENCES social_accounts(id),
  insights JSONB, -- analysis findings
  suggestions JSONB, -- recommendations
  created_at TIMESTAMP DEFAULT NOW()
);
```

### Measurement Logic
- **Rule**: All posts are scraped exactly 48 hours after being published
- **scraped_at = published_at + 48 hours**
- This allows comparing "apples to apples": all posts measured at the same point in their lifecycle

Example:
```
Monday post at 14:00 â†’ scraped Wednesday 14:00 â†’ 1200 likes
Friday post at 14:00 â†’ scraped Sunday 14:00 â†’ 800 likes
Conclusion: Mondays have better performance
```

---

## ğŸ—ï¸ NestJS Architecture
```
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ social-accounts/
â”‚   â”‚   â”œâ”€â”€ social-accounts.module.ts
â”‚   â”‚   â”œâ”€â”€ social-accounts.controller.ts
â”‚   â”‚   â”œâ”€â”€ social-accounts.service.ts
â”‚   â”‚   â””â”€â”€ entities/social-account.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”œâ”€â”€ posts.module.ts
â”‚   â”‚   â”œâ”€â”€ posts.controller.ts
â”‚   â”‚   â”œâ”€â”€ posts.service.ts
â”‚   â”‚   â””â”€â”€ entities/post.entity.ts
â”‚   â”‚
â”‚   â””â”€â”€ ai-agent/
â”‚       â”œâ”€â”€ ai-agent.module.ts
â”‚       â”œâ”€â”€ ai-agent.service.ts  (agent orchestration)
â”‚       â”œâ”€â”€ tools/
â”‚       â”‚   â”œâ”€â”€ analyze-performance.tool.ts
â”‚       â”‚   â”œâ”€â”€ generate-content.tool.ts
â”‚       â”‚   â””â”€â”€ suggest-schedule.tool.ts
â”‚       â””â”€â”€ dto/
â”‚           â””â”€â”€ analysis-request.dto.ts
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ ai.config.ts (API keys, model config)
â”‚
â””â”€â”€ database/
    â””â”€â”€ seeds/
        â””â”€â”€ posts.seed.ts (test data)
```

---

## ğŸ¤– AI Agent - Tools

### Tool 1: `analyzePostPerformance`

**Purpose**: Analyze engagement patterns in historical posts

**Input**:
```typescript
{
  social_account_id: string;
  time_period: "30days" | "60days" | "90days";
}
```

**Output**:
```typescript
{
  bestDays: string[],  // ["monday", "wednesday"]
  bestHours: number[], // [14, 18]
  topTopics: [
    { topic: string, avgLikes: number },
    // e.g., { topic: "tips", avgLikes: 1200 }
  ],
  contentPatterns: {
    withImage: { avgLikes: number },
    withoutImage: { avgLikes: number }
  }
}
```

**Implementation**: Query the DB grouping by day_of_week, hour_of_day, topic, has_image, etc.

---

### Tool 2: `generateContentSuggestion`

**Purpose**: Generate optimized post draft based on historical data

**Input**:
```typescript
{
  topic: string;
  target_day: string;  // "monday"
  target_hour: number; // 14
}
```

**Output**:
```typescript
{
  suggestedContent: string, // "ğŸ¯ 3 tips for..."
  reasoning: string, // "Based on your previous 'tips' posts published on Mondays at 2pm..."
  expectedEngagement: string // "~1200 likes in 48hrs"
}
```

**Implementation**: The LLM uses historical data to generate content similar to what worked well previously.

---

### Tool 3: `suggestPostingSchedule`

**Purpose**: Suggest weekly posting calendar

**Input**:
```typescript
{
  posts_per_week: number; // 3
}
```

**Output**:
```typescript
{
  schedule: [
    { day: "monday", hour: 14, topic: "tips" },
    { day: "wednesday", hour: 18, topic: "behind-the-scenes" },
    { day: "friday", hour: 14, topic: "promos" }
  ]
}
```

**Implementation**: Combines best days/hours with rotation of well-performing topics.

---

## ğŸ“… 3-4 Day Work Plan

### Day 1: Setup + DB + Seed
- [ ] Setup NestJS + TypeORM + PostgreSQL (Docker Compose)
- [ ] Create entities (SocialAccount, Post, Analysis)
- [ ] Seed with 50-100 varied test posts (different days, hours, topics)
- [ ] Basic CRUD endpoints for posts

**Deliverable**: Working API with test data

---

### Day 2: Vercel AI SDK Integration
- [ ] Install and configure Vercel AI SDK + Anthropic
- [ ] Implement `analyzePostPerformance` tool
- [ ] Manual testing of tool with seeded data

**Deliverable**: First tool working returning real insights

---

### Day 3: Complete Agent
- [ ] Implement `generateContentSuggestion` and `suggestPostingSchedule` tools
- [ ] Service that orchestrates the agent with all 3 tools
- [ ] POST `/api/analyze` endpoint that executes the agent

**Deliverable**: Complete agent that can analyze, suggest content and calendar

---

### Day 4: Polish + Testing
- [ ] Save analyses to DB (analyses table)
- [ ] GET `/api/analyses/:accountId` endpoint to view history
- [ ] README with usage examples
- [ ] (Optional) Minimal frontend with React/Next.js for visual demo

**Deliverable**: Complete MVP ready to show

---

## ğŸš€ Main Endpoints

### Create posts (for testing)
```http
POST /api/posts
Content-Type: application/json

{
  "social_account_id": "uuid",
  "content": "5 tips to improve your productivity",
  "topic": "tips",
  "published_at": "2024-01-08T14:00:00Z",
  "scraped_at": "2024-01-10T14:00:00Z",
  "day_of_week": "monday",
  "hour_of_day": 14,
  "likes_count": 1200,
  "comments_count": 45,
  "has_image": true
}
```

### Execute analysis with AI agent
```http
POST /api/analyze
Content-Type: application/json

{
  "social_account_id": "uuid",
  "period": "30days"
}

Response:
{
  "insights": {
    "bestDays": ["monday", "wednesday"],
    "bestHours": [14, 18],
    "topTopics": [...]
  },
  "suggestions": {
    "nextPost": {...},
    "schedule": [...]
  }
}
```

### View previous analyses
```http
GET /api/analyses/:accountId

Response:
{
  "analyses": [
    {
      "id": "uuid",
      "insights": {...},
      "suggestions": {...},
      "created_at": "2024-01-15T10:00:00Z"
    }
  ]
}
```

### (Optional) Generate specific content
```http
POST /api/generate-content
Content-Type: application/json

{
  "topic": "tips",
  "target_day": "monday",
  "target_hour": 14
}

Response:
{
  "suggestedContent": "ğŸ¯ 3 tips for...",
  "reasoning": "...",
  "expectedEngagement": "~1200 likes"
}
```

---

## ğŸ› ï¸ Tech Stack

- **Backend**: NestJS
- **Database**: PostgreSQL
- **ORM**: TypeORM
- **AI SDK**: Vercel AI SDK
- **LLM**: Claude 3.5 Sonnet (Anthropic)
- **Containerization**: Docker Compose
- **Frontend (optional)**: Next.js / React

---

## ğŸ“¦ Docker Compose Setup
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: social_analyzer
      POSTGRES_USER: dev
      POSTGRES_PASSWORD: dev123
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      DATABASE_URL: postgresql://dev:dev123@postgres:5432/social_analyzer
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY}
    depends_on:
      - postgres

volumes:
  postgres_data:
```

---

## ğŸ¯ Value for the Interview

### Demonstrates:
1. **AI Agents**: Not a simple chatbot, uses tools and orchestration
2. **Domain knowledge**: Social media data processing (relevant to the role)
3. **Backend skills**: NestJS, PostgreSQL, TypeORM, modular architecture
4. **Data analysis**: Aggregations, patterns, insights
5. **Scope management**: Functional MVP in 3-4 days

### Discussion Points:
- How to scale (workers, caching, queues)
- How to improve the agent (more tools, memory, context)
- How to integrate with real social media APIs
- How to handle multiple client accounts
- Agent observability and monitoring

---

## ğŸ“ Seed Data Example
```typescript
// 50-100 varied posts for testing
const posts = [
  {
    content: "5 tips to improve your productivity",
    topic: "tips",
    published_at: new Date("2024-01-08T14:00:00Z"),
    scraped_at: new Date("2024-01-10T14:00:00Z"),
    day_of_week: "monday",
    hour_of_day: 14,
    likes_count: 1200,
    comments_count: 45,
    has_image: true
  },
  {
    content: "Special offer today! 20% discount",
    topic: "promos",
    published_at: new Date("2024-01-10T18:00:00Z"),
    scraped_at: new Date("2024-01-12T18:00:00Z"),
    day_of_week: "wednesday",
    hour_of_day: 18,
    likes_count: 800,
    comments_count: 30,
    has_image: true
  },
  // ... more varied posts
];
```

---

## âœ… Final Checklist

### Core functionalities:
- [ ] DB with seeded historical posts
- [ ] Tool 1: Performance analysis
- [ ] Tool 2: Content generation
- [ ] Tool 3: Calendar suggestion
- [ ] Analysis endpoint that orchestrates the agent
- [ ] Analysis persistence in DB

### Nice to have:
- [ ] Simple frontend for visualization
- [ ] Engagement charts
- [ ] Export analysis as PDF/JSON
- [ ] Basic unit tests

---

## ğŸš€ Next Steps

1. Create account at https://console.anthropic.com
2. Get API key (you have $5 free)
3. Setup NestJS project
4. Follow day-by-day plan
5. Start coding!
